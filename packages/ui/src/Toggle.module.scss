@use '../styles/constants' as c;
@use '../styles/helpers' as h;

$h: 24px;
$w: 60px;
$knobRight: $w / 2 + 8px;
$trackBr: 22px;
$trackBgOn: #1dbc22;
$trackBgOff: c.$colorNeutralLight; // rgba(0,0,0,.32);
$knobBgOn: c.$colorNeutralWhite;
$knobBgOff: c.$colorNeutralLighter;
$labelMargin: 12px;
$knobH: 20px;
$knobW: 20px;
$knobOffset: 2px;

@keyframes fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.wrapper {
  // hide the actual input, we will show the toggleTrack instead.
  input[type='checkbox'] {
    display: none;
  }

  // faux wrapping label
  label {
    cursor: pointer;
    display: inline-flex; // for aligning with the .labelText
    align-items: center;
  }

  // actual text label
  .labelText {
    margin-right: $labelMargin;
  }

  // the `track` (default off state)
  .toggleTrack {
    display: inline-block;
    height: $h;
    width: $w;
    background: $trackBgOff;
    border-radius: $trackBr;
    position: relative;
  }

  // track on state
  input[type='checkbox']:checked + label .toggleTrack {
    background: $trackBgOn;
  }

  // the `knob` (default off state)
  .toggleTrack:before {
    content: '';
    display: inline-block;
    height: $knobH;
    width: $knobW;
    background: $knobBgOff;
    border-radius: 50%;
    position: absolute;
    top: $knobOffset;
    right: $knobOffset;
    transition: right c.$transitionTimeMedium ease-in;
  }

  // knob on state
  input[type='checkbox']:checked + label .toggleTrack:before {
    background: $knobBgOn;
    right: $knobRight;
  }

  // th "ON" text
  input[type='checkbox']:checked + label .toggleTrack:after {
    content: 'ON';
    position: absolute;
    top: 2px;
    right: 8px;
    font-size: 0.9rem;
    color: #fff;
    animation: fadein c.$transitionTimeMedium;
  }

  // global disabled state
  .disabled .toggleTrack {
    opacity: 0.3;
    cursor: not-allowed;
  }
}

.errorContainer {
  margin-top: c.$grid;
}

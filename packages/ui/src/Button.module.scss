@use '../styles/constants' as c;
@use '../styles/helpers' as h;

.button {
  display: inline-block;
  position: relative;
  box-sizing: border-box;
  cursor: pointer;
  border: none;
  padding: 0;
  border-radius: c.$borderRadius;
  height: c.$inputHeight;
  max-width: c.$buttonMaxWidth;
  // for <a> element
  text-decoration: none;

  @include c.typographyButton;

  .outline {
    position: absolute;
    border-radius: c.$borderRadius;
    pointer-events: none;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* doiuse-disable calc */
    width: calc(100% + #{c.$grid} * 2);
    height: calc(100% + #{c.$grid} * 2);
    /* doiuse-enable calc */
    z-index: c.$zIndex100;
    visibility: hidden;

    @include h.outlineSimple;

    &.inset {
      width: 100%;
      height: 100%;
    }
  }

  &.small {
    height: c.$inputHeightSmall;
    border-radius: c.$borderRadiusButtonSmall;

    @include c.typographyButton('small');

    .outline {
      border-radius: c.$borderRadiusButtonSmall;
    }
  }

  &:focus,
  &.focus {
    // Do not remove outline for high-contrast modes
    // https://stackoverflow.com/a/52616313
    outline: c.$outlineWidth solid transparent;

    .outline {
      visibility: visible;
    }
  }

  &:disabled {
    cursor: not-allowed;
  }

  .iconLeft {
    flex-shrink: 0;
    margin-right: c.$grid * 2;
  }

  .iconRight {
    flex-shrink: 0;
    margin-left: c.$grid * 2;
  }

  .body {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    max-width: 100%;
    width: 100%;
    height: 100%;
    padding: 0 c.$grid * 5;
    box-sizing: border-box;
  }

  &.color {
    &Primary {
      color: c.$colorPrimary;
      background-color: c.$colorPrimary;
      border-color: c.$colorPrimary;

      &:hover,
      &.hover,
      &:focus,
      &.focus {
        background-color: c.$colorPrimaryLight;
        border-color: c.$colorPrimaryLight;
        color: c.$colorPrimaryLight;
      }

      &:active,
      &.active {
        background-color: c.$colorPrimaryDark;
        border-color: c.$colorPrimaryDark;
        color: c.$colorPrimaryDark;
      }

      &.variantContained {
        color: c.$colorNeutralWhite;
      }

      &:disabled {
        color: c.$colorTextSecondary;
        background-color: c.$colorNeutral;
        border-color: c.$colorNeutral;
      }
    }

    &Secondary {
      color: c.$colorError;
      background-color: c.$colorError;
      border-color: c.$colorError;

      &:hover,
      &.hover,
      &:focus,
      &.focus {
        background-color: c.$colorErrorLight;
        border-color: c.$colorErrorLight;
        color: c.$colorErrorLight;
      }

      &:active,
      &.active {
        background-color: c.$colorErrorDark;
        border-color: c.$colorErrorDark;
        color: c.$colorErrorDark;
      }

      &.variantContained {
        color: c.$colorNeutralWhite;
      }

      &:disabled {
        color: c.$colorTextSecondary;
        background-color: c.$colorNeutral;
        border-color: c.$colorNeutral;
      }
    }
  }

  &.variant {
    &Outlined {
      background: none;
      border-style: solid;
      border-width: c.$borderWidth;

      .outline {
        /* Note: We need to take border of 1px into account */
        /* doiuse-disable calc */
        width: calc(100% + #{c.$grid} * 2.5);
        height: calc(100% + #{c.$grid} * 2.5);
        /* doiuse-enable calc */

        &.inset {
          /* doiuse-disable calc */
          width: calc(100% + #{c.$grid});
          height: calc(100% + #{c.$grid});
          /* doiuse-enable calc */
        }
      }

      &:hover,
      &.hover,
      &:active,
      &.active,
      &:focus,
      &.focus,
      &:disabled,
      &.disabled {
        background: none;
      }
    }

    &Text {
      color: inherit;
      background: none;

      &:hover,
      &.hover,
      &:active,
      &.active,
      &:focus,
      &.focus,
      &:disabled,
      &.disabled {
        color: inherit;
        background: none;
      }
    }
  }
}
